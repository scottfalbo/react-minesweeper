(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1),c=n.n(i),o=n(7),s=n.n(o),a=(n(13),n(14),n(2)),l=n(3),u=n(5),h=n(4),d=c.a.createContext(),f=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).getSpecs=function(){return localStorage.getItem("specs")?localStorage.getItem("specs").split(",").map((function(e){return parseInt(e)})):[9,9,10]},e.specs=e.getSpecs(),e.state={boardY:e.specs[0],boardX:e.specs[1],mines:e.specs[2],minesStatic:e.specs[2],firstTurn:!0,controlsSwitch:!1,optionsSwitch:!1},e.timerStart=function(){e.state.firstTurn&&e.setState({firstTurn:!1})},e.timerStop=function(){e.setState({firstTurn:!0})},e.optionsToggle=function(t){t.preventDefault(),e.state.controlsSwitch&&(e.controlsSwitch=!1),e.setState({optionsSwitch:!e.state.optionsSwitch,controlsSwitch:e.controlsSwitch})},e.controlsToggle=function(t){t.preventDefault(),e.state.optionsSwitch&&(e.optionsSwitch=!1),e.setState({controlsSwitch:!e.state.controlsSwitch,optionsSwitch:e.optionsSwitch})},e.createMines=function(t,n){for(var r=[],i=0;i<t;i++){for(var c=e.randomNumber(n);r.includes(c);)c=e.randomNumber(n);r.push(c)}return r},e.randomNumber=function(e){return Math.floor(Math.random()*e+1)},e.mineArray=e.createMines(e.state.mines,e.state.boardX*e.state.boardY),e.counter=0,e.gameCell={},e.boardArray=Array.apply(null,Array(e.state.boardY)).map((function(t,n){return Array.apply(null,Array(e.state.boardX)).map((function(t,r){e.counter++;var i=!1;return e.mineArray.forEach((function(t){t===e.counter&&(i=!0)})),e.gameCell={key:e.counter.toString(),clicked:!1,cellY:n,cellX:r,goBoom:i,danger:0,view:".",highlight:!1}}))})),e.isOnBoard=function(t,n){return t>=0&&t<e.state.boardY&&n>=0&&n<e.state.boardX},e.checkAround=function(t,n){for(var r=[],i=-1;i<2;i++)for(var c=-1;c<2;c++)0===i&&0===c||!e.isOnBoard(t+i,n+c)||r.push(e.boardArray[t+i][n+c]);return r},e.boardArray=e.boardArray.map((function(t){return t.map((function(t){return t.goBoom?t.danger="X":t.danger=e.checkAround(t.cellY,t.cellX).filter((function(e){return!!e.goBoom})).length,t}))})),e.mineTracker=function(t){e.setState((function(e){return{mines:e.mines+=t}}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsx)(d.Provider,{value:{state:this.state,timerControls:{timerStart:this.timerStart,timerStop:this.timerStop},menuButtons:{optionsToggle:this.optionsToggle,controlsToggle:this.controlsToggle},board:this.boardArray,checkAround:this.checkAround,isOnBoard:this.isOnBoard,mineTracker:this.mineTracker},children:this.props.children})}}]),n}(i.Component),b=d.Consumer,j=function(){return Object(r.jsxs)("header",{children:[Object(r.jsx)("h1",{children:"MineSweeper"}),Object(r.jsx)(b,{children:function(e){var t=e.menuButtons;return Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)("button",{onClick:t.optionsToggle,children:"options"})}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{onClick:t.controlsToggle,children:"controls"})})]})})}})]})},p=(n(15),function(){return Object(r.jsx)(b,{children:function(e){var t=e.state;return Object(r.jsx)("div",{className:"mine-tracker display",children:Object(r.jsx)("p",{children:t.mines})})}})}),m=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={counting:!1,elapsed:0,lastTime:0},e.ticker=function(){e.state.counting&&e.setState((function(e){return{elapsed:e.elapsed+.1}})),e.props.firstTurn?e.turnTimerOff():e.turnTimerOn()},e.turnTimerOn=function(){e.setState((function(){return{counting:!0}}))},e.turnTimerOff=function(){e.setState((function(){return{counting:!1}}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.intervalId=setInterval((function(){return e.ticker()}),100)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=Math.floor(this.state.elapsed);return Object(r.jsx)("div",{className:"timer display",children:Object(r.jsx)("p",{children:e})})}}]),n}(i.Component),g=function(){return Object(r.jsxs)("section",{className:"info-board",children:[Object(r.jsx)(p,{}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:function(){window.location.reload()},children:"reset"})}),Object(r.jsx)(b,{children:function(e){var t=e.state;return Object(r.jsx)(m,{firstTurn:t.firstTurn})}})]})},v=(n(16),function(e){var t=e.cell,n=e.clicks;return Object(r.jsxs)("td",{children:[Object(r.jsx)("div",{className:t.highlight?"highlighted":""}),Object(r.jsxs)("button",{className:function(e){for(var t=1;t<=8;t++)if(e.view===t)return"c".concat(t," cell-button");return 0===e.view?"no-text black-box cell-button":"."===e.view||"F"===e.view||"X"===e.view||"L"===e.view?"no-text cell-button":void 0}(t),onMouseUp:function(e){e.preventDefault(),e.shiftKey?n.shiftClick(t):0!==e.button||t.clicked||"F"===t.view?2!==e.button||"F"!==t.view&&"."!==t.view||n.rightClick(t):n.leftClick(t)},onMouseDown:function(e){e.preventDefault(),e.shiftKey&&n.shiftHighlight(t)},onMouseLeave:function(e){e.preventDefault(),n.leaveHighlight(t)},children:[Object(r.jsx)("p",{children:t.view}),Object(r.jsx)("img",{src:function(e){return"."===e.view?"/../images/spacer.png":"F"===e.view?"/../images/flag_icon.png":"X"===e.view?"/../images/bomb.png":"L"===e.view?"/../images/bomb-X.png":"/../images/spacer.png"}(t),alt:"......."})]})]})}),O=function(e){return Object(r.jsx)(b,{children:function(t){var n=t.timerControls;t.state;return Object(r.jsx)("tr",{children:e.row.map((function(t){return Object(r.jsx)(v,{cell:t,clicks:e.clicks,timerControls:n},t.key)}))})}})},x=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={board:e.props.board},e.disableContextMenu=function(e){e.preventDefault()},e.leftClick=function(t){e.props.timerControls.timerStart();var n=!1,r=!1;t.view=t.danger,t.clicked=!0,"X"===t.danger&&(n=!0),0===t.danger&&(r=!0);var i=e.props.board;i[t.cellY][t.cellX]=t,e.setState((function(){return i})),n&&e.kaboom(t),r&&e.exposeBlanks(t,i),n||(e.winner=e.checkWin())},e.rightClick=function(t){t.view="."===t.view?"F":".","F"===t.view?(e.props.mineTracker(-1),t.clicked=!0):"."===t.view&&(e.props.mineTracker(1),t.clicked=!1);var n=e.props.board;n[t.cellY][t.cellX]=t,e.setState((function(){return n}))},e.shiftClick=function(t){e.leaveHighlight(t);var n=0,r=e.props.checkAround(t.cellY,t.cellX);r.forEach((function(e){"F"===e.view&&n++}));var i=e.props.board;n>=t.view&&r.forEach((function(t){"F"!==t.view&&(i[t.cellY][t.cellX].view=t.danger,i[t.cellY][t.cellX].clicked=!0,0===t.view&&e.exposeBlanks(t,i)),"X"===t.view&&e.kaboom(t)})),e.setState((function(){return i})),e.winner=e.checkWin()},e.shiftHighlight=function(t){var n=e.state.board;e.props.checkAround(t.cellY,t.cellX).forEach((function(e){n[e.cellY][e.cellX].highlight=!0})),e.setState((function(){return n}))},e.leaveHighlight=function(t){var n=e.state.board;e.props.checkAround(t.cellY,t.cellX).forEach((function(e){n[e.cellY][e.cellX].highlight=!1})),e.setState((function(){return n}))},e.lose=!1,e.kaboom=function(t){e.lose=!0;var n=e.state.board.map((function(e){return e.map((function(e){return e.clicked=!0,t.view="L","F"!==e.view&&(e.view=e.danger),e}))}));e.props.timerControls.timerStop(),e.setState((function(){return n}))},e.winner=!1,e.checkWin=function(){var t=0;e.state.board.forEach((function(e){e.forEach((function(e){e.view>=0&&e.view<=8&&t++}))}));var n=e.props.higherState;return n.boardY*n.boardX-n.minesStatic===t&&(e.props.timerControls.timerStop(),!0)},e.exposeBlanks=function(t,n){var r=e.props.checkAround(t.cellY,t.cellX),i=[];r.forEach((function(e){n[e.cellY][e.cellX].view=e.danger,0!==e.danger||e.clicked||i.push(e),n[e.cellY][e.cellX].clicked=!0})),e.setState((function(){return n})),0===i.length||i.forEach((function(t){e.exposeBlanks(t,n)}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t="";return t=this.winner?"You made it!!!":this.lose?"You Exploded!":"...",Object(r.jsxs)("section",{className:"game-board",children:[Object(r.jsx)("table",{className:"mine-field",onContextMenu:this.disableContextMenu,children:Object(r.jsx)("tbody",{children:this.state.board.map((function(t,n){return Object(r.jsx)(O,{row:e.state.board[n],clicks:{leftClick:e.leftClick,rightClick:e.rightClick,shiftClick:e.shiftClick,shiftHighlight:e.shiftHighlight,leaveHighlight:e.leaveHighlight}},"row".concat(n))}))})}),Object(r.jsx)("div",{className:"reader-board",children:Object(r.jsx)("p",{children:t})})]})}}]),n}(i.Component),k=(n(17),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).difficulty=localStorage.getItem("difficulty")?localStorage.getItem("difficulty"):"beginner",e.state={difficulty:e.difficulty},e.handleSubmit=function(){var t=[];t="beginner"===e.state.difficulty?[9,9,10]:"intermediate"===e.state.difficulty?[16,16,40]:"expert"===e.state.difficulty?[16,30,99]:[9,9,10],localStorage.setItem("specs",t)},e.handleChange=function(t){e.setState({difficulty:t.target.value})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("section",{children:[Object(r.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(r.jsx)("div",{className:"radio",children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"radio",value:"beginner",checked:"beginner"===this.state.difficulty,onChange:this.handleChange}),"Beginner"]})}),Object(r.jsx)("div",{className:"radio",children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"radio",value:"intermediate",checked:"intermediate"===this.state.difficulty,onChange:this.handleChange}),"Intermediate"]})}),Object(r.jsx)("div",{className:"radio",children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"radio",value:"expert",checked:"expert"===this.state.difficulty,onChange:this.handleChange}),"Expert"]})}),Object(r.jsx)("button",{type:"submit",children:"start new game"})]}),Object(r.jsx)("button",{onClick:this.props.menuButtons.optionsToggle,className:"close-window",children:"\u2716"})]})}}]),n}(i.Component)),w=(n(18),function(e){return Object(r.jsxs)("section",{children:[Object(r.jsx)("h1",{children:"Controls"}),Object(r.jsxs)("article",{children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:"Left Click:"})," an empty square to reveal it."]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:"Right Click:"})," an empty square to flag, or unflag it."]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:"Shift Click:"})," a number to reveal it's adjacent squares. This only works if there are adjacent flags equal to the number."]})]}),Object(r.jsx)("button",{onClick:e.menuButtons.controlsToggle,className:"close-window",children:"\u2716"})]})}),S=function(){return Object(r.jsx)(b,{children:function(e){var t=e.board,n=e.timerControls,i=e.mineTracker,c=e.checkAround,o=e.state,s=e.menuButtons;return Object(r.jsx)("div",{className:"app",children:Object(r.jsxs)("section",{className:"game-box",children:[Object(r.jsx)(j,{}),Object(r.jsx)(g,{}),Object(r.jsx)(x,{board:t,timerControls:n,mineTracker:i,checkAround:c,higherState:o}),Object(r.jsx)("div",{className:o.optionsSwitch?"toggle-box options show-me":"toggle-box options hide-me",children:Object(r.jsx)(k,{menuButtons:s})}),Object(r.jsx)("div",{className:o.controlsSwitch?"toggle-box controls show-me":"toggle-box controls hide-me",children:Object(r.jsx)(w,{menuButtons:s})})]})})}})};s.a.render(Object(r.jsx)(f,{children:Object(r.jsx)(S,{})}),document.getElementById("root"))}],[[19,1,2]]]);
//# sourceMappingURL=main.3efa691e.chunk.js.map